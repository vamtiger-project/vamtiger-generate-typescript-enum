#!/usr/bin/env node
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var lodash=require("lodash"),clipboardy=require("clipboardy"),path=require("path"),getFolderContent=_interopDefault(require("vamtiger-get-directory-content-recursive")),Args=_interopDefault(require("vamtiger-argv/build/main")),getHelp=_interopDefault(require("vamtiger-commandline-help"));function __awaiter(e,r,n,o){return new(n||(n=Promise))(function(t,a){function m(e){try{s(o.next(e))}catch(e){a(e)}}function i(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){e.done?t(e.value):new n(function(r){r(e.value)}).then(m,i)}s((o=o.apply(e,r)).next())})}function getEnum({enumObject:e,name:r}){const{newline:n,comma:o}=exports.StringConstant,{spaces:t}=regex,a=Object.keys(e).map(r=>`    ${lodash.camelCase(r).replace(t,"")} = '${e[r]}'`).join(`${o}${n}`);return[`export enum ${lodash.startCase(r).replace(t,"")} {`,a,"}"].join(n)}function saveEnum({name:e,enumObject:r,clipboard:n}){return __awaiter(this,void 0,void 0,function*(){const o=getEnum({name:e,enumObject:r});n?yield clipboardy.write(o):console.log(o)})}function enumFromFolderContent({name:e,path:r,clipboard:n}){return __awaiter(this,void 0,void 0,function*(){yield saveEnum({name:e||path.basename(r),enumObject:(yield getFolderContent({path:r})).map(e=>path.basename(e)).reduce((e,r)=>Object.assign(e,{[r]:r}),{}),clipboard:n})})}function generateEnumFrom({from:e,clipboard:r,name:n,path:o}){return __awaiter(this,void 0,void 0,function*(){const t={[exports.GenerateEnumFrom.folderContent]:enumFromFolderContent}[e],a={clipboard:r,name:n,path:o};if(!t)throw new Error(`${exports.ErrorMessage.cannotGenerateEnumFrom}: ${e}`);yield t(a)})}const regex={space:/\s/,spaces:new RegExp("")};!function(e){e.newline="\n",e.comma=","}(exports.StringConstant||(exports.StringConstant={})),(exports.GenerateEnumFrom||(exports.GenerateEnumFrom={})).folderContent="folderContent",function(e){e.cannotGenerateEnumFrom="Cannot generate enum from",e.noEnumFrom='No "from" option defined'}(exports.ErrorMessage||(exports.ErrorMessage={})),function(e){e.from="from",e.help="help",e.name="name",e.clipboard="clipboard",e.directory="directory"}(exports.CommandlineArg||(exports.CommandlineArg={}));const ShortCommandlineArgs={[exports.CommandlineArg.from]:"f",[exports.CommandlineArg.help]:"h",[exports.CommandlineArg.name]:"n",[exports.CommandlineArg.clipboard]:"c",[exports.CommandlineArg.directory]:"d"},CommandlineDescription={[exports.CommandlineArg.from]:"Generate enum from (e.g folder content)",[exports.CommandlineArg.name]:"Name of the enum declaration",[exports.CommandlineArg.clipboard]:"copy enum to clipboard",[exports.CommandlineArg.directory]:"Path for enum from folder content",[exports.CommandlineArg.help]:"Help"},args=new Args,from=args.get(exports.CommandlineArg.from)||args.get(ShortCommandlineArgs[exports.CommandlineArg.from]),name=args.get(exports.CommandlineArg.name)||args.get(ShortCommandlineArgs[exports.CommandlineArg.name])||"",directory=args.get(exports.CommandlineArg.directory)||args.get(ShortCommandlineArgs[exports.CommandlineArg.directory])||"",clipboard=args.has(exports.CommandlineArg.clipboard)||args.has(ShortCommandlineArgs[exports.CommandlineArg.clipboard]),params=from&&{from:from,name:name,path:path.resolve(process.cwd(),directory),clipboard:clipboard},help=(args.has(exports.CommandlineArg.help)||args.has(ShortCommandlineArgs[exports.CommandlineArg.help]))&&getHelp({args:Object.assign(exports.CommandlineArg),short:ShortCommandlineArgs,description:CommandlineDescription});help?console.log(help):params&&generateEnumFrom(params),exports.regex=regex,exports.ShortCommandlineArgs=ShortCommandlineArgs,exports.CommandlineDescription=CommandlineDescription,exports.default=generateEnumFrom;
//# sourceMappingURL=index.js.map
